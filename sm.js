var w=window,sp=new URLSearchParams(w.location.search);const k=["u","d","l","r"],kp={u:"d",d:"u",l:"r",r:"l"};customElements.define("s-g",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.s(),w.addEventListener("keydown",(t=>{let s=t.key.substr(5,1).toLowerCase();k.includes(s)&&kp[s]!=this.dr&&(this.dr=s)})),setInterval(this.uh.bind(this),sp.get("s")||1e3)}s(){this.d=sp.get("d")||10,this.dm=this.d-1,this.shadowRoot.innerHTML=`\n<style>\n:host {\n    display: flex;\n    width: 800px;\n    height: 800px;\n    flex-wrap: wrap;\n}\ns-c {\n    flex-basis: ${100/this.d}%;\n    border: 1px solid #000;\n    box-sizing: border-box;\n}\ns-c[o] { background: #000; }\ns-c[f] { background: red; }\n</style>\n${"<s-c></s-c>".repeat(this.d**2)}`,this.cs=this.shadowRoot.querySelectorAll("s-c"),this.hd={x:5,y:6,el:this.cs[65]},this.tl=[],this.dr="u",this.l=2,this.sf()}uh(){let t=this.dr,s=this.hd,e=this.tl;"u"==t&&s.y--,"d"==t&&s.y++,"l"==t&&s.x--,"r"==t&&s.x++,s.y>this.dm&&(s.y=0),s.y<0&&(s.y=this.dm),s.x>this.dm&&(s.x=0),s.x<0&&(s.x=this.dm),s.el=this.cs[s.y*this.d+s.x],s.el.hasAttribute("o")?this.s():(s.el.setAttribute("o",""),e.push(s.el),e.length>this.l&&e.shift().removeAttribute("o"),s.el===this.f&&this.ef())}sf(){let t=Array.from(this.cs).filter((t=>!t.hasAttribute("o")));this.f=t[Math.floor(Math.random()*t.length)],this.f.setAttribute("f","")}ef(){this.l++,this.f.removeAttribute("f"),this.sf()}});
