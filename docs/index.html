<s-g></s-g><script>
var w=window,sp=new URLSearchParams(w.location.search),o={u:"d",d:"u",l:"r",r:"l"},k=Object.keys(o);customElements.define("s-g",class extends HTMLElement{constructor(){super(),this.r=this.attachShadow({mode:"open"}),this.s(),w.addEventListener("keydown",(t=>{let s=t.key.substr(5,1).toLowerCase();k.includes(s)&&o[s]!=this.dr&&(this.dr=s)})),setInterval(this.uh.bind(this),sp.get("s")||200)}s(){this.d=sp.get("d")||10,this.dm=this.d-1,this.r.innerHTML=`\n<style>:host{display: flex;width: 800px;height: 800px;flex-wrap: wrap;}s-c{flex-basis:${100/this.d}%;border:1px solid #000;box-sizing:border-box;}s-c[o] {background:#000;}s-c[f]{background:red;}</style>\n${"<s-c></s-c>".repeat(this.d**2)}`,this.cs=this.r.querySelectorAll("s-c"),this.hd={x:5,y:6,el:this.cs[65]},this.tl=[],this.dr="u",this.l=2,this.sf()}uh(){let[t,s,e]=[this.dr,this.hd,this.tl];"u"==t&&s.y--,"d"==t&&s.y++,"l"==t&&s.x--,"r"==t&&s.x++,s.y>this.dm&&(s.y=0),s.y<0&&(s.y=this.dm),s.x>this.dm&&(s.x=0),s.x<0&&(s.x=this.dm),s.el=this.cs[s.y*this.d+s.x],s.el.hasAttribute("o")?this.s():(s.el.setAttribute("o",""),e.push(s.el),e.length>this.l&&e.shift().removeAttribute("o"),s.el===this.f&&this.ef())}sf(){let t=Array.from(this.cs).filter((t=>!t.hasAttribute("o")));this.f=t[Math.floor(Math.random()*t.length)],this.f.setAttribute("f","")}ef(){this.l++,this.f.removeAttribute("f"),this.sf()}});
</script>
